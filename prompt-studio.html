<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Studio - Algrowithm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'soft-gold': '#d4af37',
                        'rich-black': '#0a0a0a',
                        'off-white': '#fcfcfc',
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                }
            }
        }
    </script>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f3f4f6;
            color: #0a0a0a;
        }

        .upload-zone {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: #d4af37;
            background-color: rgba(212, 175, 55, 0.05);
        }

        .upload-zone.has-image {
            border-style: solid;
            border-color: #d4af37;
        }

        .image-thumbnail {
            position: relative;
            display: inline-block;
        }

        .image-thumbnail .remove-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 20px;
            height: 20px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .image-thumbnail:hover .remove-btn {
            opacity: 1;
        }

        .prompt-output {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #d4af37;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/80 backdrop-blur-md z-50 border-b border-gray-200 px-6 py-3">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="index.html"
                class="text-lg font-serif font-bold text-rich-black hover:text-soft-gold transition-colors">
                <i class="fa-solid fa-arrow-left mr-2"></i> Algrowithm
            </a>
            <div class="flex gap-4">
                <a href="workbook_1.html"
                    class="px-4 py-1.5 bg-white text-gray-400 hover:text-rich-black rounded-full text-xs font-bold transition-colors">Session
                    1</a>
                <a href="workbook_2.html"
                    class="px-4 py-1.5 bg-white text-gray-400 hover:text-rich-black rounded-full text-xs font-bold transition-colors">Session
                    2</a>
                <a href="workbook_3.html"
                    class="px-4 py-1.5 bg-white text-gray-400 hover:text-rich-black rounded-full text-xs font-bold transition-colors">Session
                    3</a>
                <a href="prompt-studio.html"
                    class="px-4 py-1.5 bg-soft-gold/10 text-soft-gold hover:bg-soft-gold hover:text-white rounded-full text-xs font-bold transition-colors border border-soft-gold">
                    <i class="fa-solid fa-wand-magic-sparkles mr-1"></i>Prompt</a>
            </div>
            <!-- ì˜¤ë¥¸ìª½ ì—¬ë°±ìš© (Print ë²„íŠ¼ ìë¦¬) -->
            <div class="w-24"></div>
        </div>
    </nav>
    <div class="h-14"></div>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-6 py-8">
        <!-- Header -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center gap-2 bg-soft-gold/10 text-soft-gold px-4 py-1.5 rounded-full text-sm font-bold mb-4">
                <i class="fa-solid fa-wand-magic-sparkles"></i>
                <span>AI Prompt Generator</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-serif font-bold text-rich-black mb-3">
                ì›Œí¬ì§€ë¥¼ í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•˜ê¸°
            </h1>
            <p class="text-gray-500 text-sm max-w-xl mx-auto">
                ì‘ì„±í•œ ì›Œí¬ì§€ë¥¼ ì´¬ì˜í•´ì„œ ì—…ë¡œë“œí•˜ë©´, ë‚˜ë§Œì˜ ì›¹ì‚¬ì´íŠ¸ ìƒì„±ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ê°€ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.
            </p>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
            <!-- Left: Upload Section -->
            <div class="flex flex-col gap-6">
                <!-- Main Card -->
                <div class="bg-white rounded-2xl p-6 shadow-sm flex-1 flex flex-col">
                    <h2 class="text-lg font-bold text-rich-black mb-4 flex items-center gap-2">
                        <span class="w-7 h-7 bg-rich-black text-white rounded-full flex items-center justify-center text-sm">1</span>
                        ì›Œí¬ì§€ ì‚¬ì§„ ì—…ë¡œë“œ
                    </h2>

                    <!-- Upload Zone -->
                    <div id="uploadZone" class="upload-zone rounded-xl p-8 text-center cursor-pointer flex-1 flex flex-col justify-center" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" accept="image/*" multiple class="hidden" onchange="handleFileSelect(event)">

                        <div id="uploadPlaceholder">
                            <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fa-solid fa-cloud-arrow-up text-2xl text-gray-400"></i>
                            </div>
                            <p class="text-gray-600 font-medium mb-1">í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ</p>
                            <p class="text-gray-400 text-sm">ë˜ëŠ” ë“œë˜ê·¸ ì•¤ ë“œë¡­</p>
                            <p class="text-gray-300 text-xs mt-3">JPG, PNG ì§€ì› (ìµœëŒ€ 4ì¥, ê° 10MB)</p>
                        </div>

                        <div id="imagePreview" class="hidden">
                            <div id="previewContainer" class="flex flex-wrap gap-3 justify-center mb-3">
                                <!-- Image thumbnails will be inserted here -->
                            </div>
                            <p id="imageCount" class="text-soft-gold text-sm font-medium">
                                <i class="fa-solid fa-check-circle mr-1"></i> <span>0</span>ì¥ì˜ ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤
                            </p>
                            <p class="text-gray-400 text-xs mt-1">í´ë¦­í•˜ì—¬ ì¶”ê°€ ì—…ë¡œë“œ (ìµœëŒ€ 4ì¥)</p>
                        </div>
                    </div>

                    <!-- Camera Button (Mobile) -->
                    <button onclick="document.getElementById('cameraInput').click()"
                        class="w-full mt-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 md:hidden">
                        <i class="fa-solid fa-camera"></i>
                        ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•˜ê¸°
                    </button>
                    <input type="file" id="cameraInput" accept="image/*" capture="environment" class="hidden" onchange="handleFileSelect(event)">

                    <!-- Extract Button - Inside Card -->
                    <button id="extractBtn" onclick="extractFromImage()" disabled
                        class="w-full mt-4 py-4 bg-rich-black text-white rounded-xl font-bold text-lg transition-all hover:bg-soft-gold disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                        <span id="extractBtnText">í”„ë¡¬í”„íŠ¸ ìƒì„±í•˜ê¸°</span>
                        <div id="extractSpinner" class="loading-spinner hidden"></div>
                    </button>
                </div>

                <!-- Instructions -->
                <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                    <h3 class="text-sm font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <i class="fa-solid fa-lightbulb"></i> ì´¬ì˜ íŒ
                    </h3>
                    <ul class="text-xs text-blue-700 space-y-1">
                        <li>â€¢ ì›Œí¬ì§€ ì•/ë’¤ë©´ì„ ëª¨ë‘ ì´¬ì˜í•´ì„œ ì—…ë¡œë“œí•´ ì£¼ì„¸ìš”</li>
                        <li>â€¢ ì›Œí¬ì§€ ì „ì²´ê°€ ì˜ ë³´ì´ë„ë¡ ì´¬ì˜í•´ ì£¼ì„¸ìš”</li>
                        <li>â€¢ ë°ì€ ê³³ì—ì„œ ê·¸ë¦¼ìê°€ ì§€ì§€ ì•Šê²Œ ì°ì–´ì£¼ì„¸ìš”</li>
                        <li>â€¢ ê¸€ì”¨ê°€ ì„ ëª…í•˜ê²Œ ë³´ì—¬ì•¼ ì •í™•ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤</li>
                    </ul>
                </div>
            </div>

            <!-- Right: Output Section -->
            <div class="flex flex-col gap-6">
                <!-- Main Card -->
                <div class="bg-white rounded-2xl p-6 shadow-sm flex-1 flex flex-col">
                    <h2 class="text-lg font-bold text-rich-black mb-4 flex items-center gap-2">
                        <span class="w-7 h-7 bg-soft-gold text-white rounded-full flex items-center justify-center text-sm">2</span>
                        ìƒì„±ëœ í”„ë¡¬í”„íŠ¸
                    </h2>

                    <!-- Extracted Keywords -->
                    <div id="keywordsSection" class="mb-4 hidden">
                        <p class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">ì¶”ì¶œëœ í‚¤ì›Œë“œ</p>
                        <div id="keywordTags" class="flex flex-wrap gap-2">
                            <!-- Tags will be inserted here -->
                        </div>
                    </div>

                    <!-- Prompt Output -->
                    <div class="prompt-output rounded-xl p-5 flex-1 min-h-[200px] max-h-[300px] overflow-y-auto">
                        <div id="promptPlaceholder" class="text-gray-400 text-sm text-center py-16">
                            <i class="fa-solid fa-wand-magic-sparkles text-3xl mb-3 opacity-30"></i>
                            <p>ì›Œí¬ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´<br>í”„ë¡¬í”„íŠ¸ê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤</p>
                        </div>
                        <div id="promptOutput" class="hidden">
                            <p class="text-gray-400 text-xs mb-2 uppercase tracking-wider">Lovable Prompt</p>
                            <p id="promptText" class="text-white text-sm leading-relaxed whitespace-pre-wrap"></p>
                        </div>
                    </div>

                    <!-- Copy Button - Inside Card -->
                    <button id="copyBtn" onclick="copyPrompt()" disabled
                        class="copy-btn w-full mt-4 py-4 bg-soft-gold text-white rounded-xl font-bold text-lg transition-all hover:bg-yellow-600 disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2">
                        <i class="fa-regular fa-copy"></i>
                        <span id="copyBtnText">í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°</span>
                    </button>
                </div>

                <!-- How to Use -->
                <div class="bg-gradient-to-br from-soft-gold/10 to-yellow-50 rounded-xl p-4 border border-soft-gold/20">
                    <h3 class="text-sm font-bold text-rich-black mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-rocket text-soft-gold"></i> í”„ë¡¬í”„íŠ¸ ì‚¬ìš©ë²•
                    </h3>
                    <ol class="text-xs text-gray-600 space-y-2">
                        <li class="flex gap-2">
                            <span class="w-5 h-5 bg-soft-gold/20 text-soft-gold rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold">1</span>
                            <span>ìœ„ì—ì„œ ìƒì„±ëœ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="w-5 h-5 bg-soft-gold/20 text-soft-gold rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold">2</span>
                            <span><a href="https://lovable.dev" target="_blank" class="text-soft-gold underline">Lovable</a>ì— ì ‘ì†í•©ë‹ˆë‹¤</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="w-5 h-5 bg-soft-gold/20 text-soft-gold rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold">3</span>
                            <span>ë³µì‚¬í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ë¶™ì—¬ë„£ê³  ì›¹ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="w-5 h-5 bg-soft-gold/20 text-soft-gold rounded-full flex items-center justify-center flex-shrink-0 text-xs font-bold">4</span>
                            <span>ë‚˜ë§Œì˜ ì›¹ì‚¬ì´íŠ¸ ì™„ì„±!</span>
                        </li>
                    </ol>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-16 py-8 border-t border-gray-200 bg-white">
        <div class="max-w-6xl mx-auto px-6 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-xs font-bold bg-soft-gold text-white px-2 py-0.5 rounded">Algrowithm</span>
                <span class="text-xs text-gray-400">Â© 2025 Algrowithm. All rights reserved.</span>
            </div>
        </div>
    </footer>

    <script>
        let uploadedImages = []; // ë‹¤ì¤‘ ì´ë¯¸ì§€ ë°°ì—´ (ìµœëŒ€ 4ì¥)
        const MAX_IMAGES = 4;

        // í™˜ê²½ ê°ì§€: ë¡œì»¬ì¸ì§€ ë°°í¬ í™˜ê²½ì¸ì§€ í™•ì¸
        const IS_LOCAL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

        // ë¡œì»¬ ê°œë°œìš© API í‚¤ (localStorageì—ì„œ ê°€ì ¸ì˜¤ê¸°)
        function getLocalApiKey() {
            return localStorage.getItem('gemini_api_key');
        }

        function setLocalApiKey(key) {
            localStorage.setItem('gemini_api_key', key);
        }

        // ë¡œì»¬ í™˜ê²½ì—ì„œ API í‚¤ ì…ë ¥ í”„ë¡¬í”„íŠ¸
        function promptForApiKey() {
            const savedKey = getLocalApiKey();
            const message = savedKey
                ? 'ì €ì¥ëœ API í‚¤ê°€ ìˆìŠµë‹ˆë‹¤. ìƒˆ í‚¤ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ì·¨ì†Œë¥¼ ëˆ„ë¥´ë©´ ê¸°ì¡´ í‚¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.'
                : 'ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\n(Google AI Studioì—ì„œ ë°œê¸‰: https://aistudio.google.com/apikey)';

            const newKey = prompt(message, '');
            if (newKey && newKey.trim()) {
                setLocalApiKey(newKey.trim());
                return newKey.trim();
            }
            return savedKey;
        }

        // Gemini API ì§ì ‘ í˜¸ì¶œ (ë¡œì»¬ìš©) - ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›
        async function callGeminiDirectly(imagesBase64) {
            let apiKey = getLocalApiKey();

            if (!apiKey) {
                apiKey = promptForApiKey();
                if (!apiKey) {
                    throw new Error('API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                }
            }

            // ì´ë¯¸ì§€ parts ë°°ì—´ ìƒì„±
            const imageParts = imagesBase64.map(img => ({
                inline_data: {
                    mime_type: 'image/jpeg',
                    data: img.replace(/^data:image\/\w+;base64,/, '')
                }
            }));

            const imageCountText = imagesBase64.length > 1
                ? `ì´ ${imagesBase64.length}ì¥ì˜ ì´ë¯¸ì§€ëŠ” "ë‚˜ë§Œì˜ ì»¤ë¦¬ì–´ ë¸Œëœë”© ì›Œí¬ë¶ (3íšŒì°¨)"ì˜ ì•/ë’¤ë©´ì…ë‹ˆë‹¤.`
                : 'ì´ ì´ë¯¸ì§€ëŠ” "ë‚˜ë§Œì˜ ì»¤ë¦¬ì–´ ë¸Œëœë”© ì›Œí¬ë¶ (3íšŒì°¨)"ì…ë‹ˆë‹¤.';

            const promptText = `${imageCountText}

## ì›Œí¬ì§€ êµ¬ì¡° (ì†ê¸€ì”¨ë¡œ ì‘ì„±ë¨)
- **í‘œì§€**: ì´ë¦„, ì „í™”ë²ˆí˜¸
- **STEP 1**: ê°€ì¹˜ í‚¤ì›Œë“œ 100ê°œ ì¤‘ ì²´í¬ â†’ ìµœì¢… 3ê°œ ì„ íƒ
- **STEP 2**: ì‚´ì•„ìˆìŒì„ ëŠë‚€ ê²½í—˜ 3ê°€ì§€
- **STEP 3**: ë¡¤ëª¨ë¸ê³¼ ë™ê²½ ì´ìœ 
- **STEP 4**: ìœ ì‚° í¸ì§€ (ë‚˜ì—ê²Œ ë‚¨ê¸¸ ë©”ì‹œì§€)
- **STEP 5**: ì‚¶ì˜ ëª©ì (ê°€ì¹˜ê´€) í•œ ì¤„ + ëª©í‘œ 3ê°€ì§€

---

ë¨¼ì € ì›Œí¬ì§€ì—ì„œ ì•„ë˜ ë‚´ìš©ì„ ì¶”ì¶œí•´ì£¼ì„¸ìš”:

1. **ì¶”ì¶œëœ í‚¤ì›Œë“œ** (5-7ê°œ): ì›Œí¬ì§€ì—ì„œ ë°œê²¬í•œ í•µì‹¬ í‚¤ì›Œë“œë“¤

ê·¸ë¦¬ê³  ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ **Lovableì—ì„œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” í”„ë¡¬í”„íŠ¸**ë¥¼ ì•„ë˜ í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”:

---
**ì›¹ì‚¬ì´íŠ¸ ìƒì„± í”„ë¡¬í”„íŠ¸:**

# Role
ë‹¹ì‹ ì€ **ì„¼ìŠ¤ ìˆëŠ” ì›¹ì‚¬ì´íŠ¸ ë””ìì´ë„ˆì´ì ë§Œë“¤ê¸° ë„ìš°ë¯¸**ì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì•„ë˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, **ëŸ¬ë²„ë¸”(Lovable)ì´ ì¦‰ì‹œ ì½”ë“œë¡œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì´ê³  ì „ë¬¸ì ì¸ ì›¹ì‚¬ì´íŠ¸ ê¸°íšì•ˆ**ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.

---

# [ì…ë ¥ëœ ì‚¬ìš©ì ì •ë³´]

## 1. ì›¹ì‚¬ì´íŠ¸ ì •ì²´ì„±
- **ì›¹ì‚¬ì´íŠ¸ ì´ë¦„:** [í‘œì§€ì˜ ì´ë¦„]
- **í•œ ì¤„ ì†Œê°œ:** [STEP 5ì˜ "ì‚¶ì˜ ëª©ì " í•œ ì¤„]
- **ì£¼ìš” íƒ€ê²Ÿ:** [STEP 3 ë¡¤ëª¨ë¸ ë™ê²½ ì´ìœ ì—ì„œ ìœ ì¶”í•œ íƒ€ê²Ÿ]
- **í•µì‹¬ ë¬´ë“œ(Feeling):** ë°©ë¬¸ìê°€ ì´ ì‚¬ì´íŠ¸ì—ì„œ "[STEP 1 í•µì‹¬ ê°€ì¹˜ 3ê°œ]" ëŠë‚Œì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

## 2. ë””ìì¸ ì‹œìŠ¤í…œ
- **ë©”ì¸ ì»¬ëŸ¬:** [STEP 1 í•µì‹¬ ê°€ì¹˜ í‚¤ì›Œë“œ ëŠë‚Œì— ë§ëŠ” ìƒ‰ìƒ ì¶”ì²œ]
- **í¬ì¸íŠ¸ ì»¬ëŸ¬:** [ë³´ì¡° ìƒ‰ìƒ ì¶”ì²œ]
- **ë°°ê²½ ìŠ¤íƒ€ì¼:** [ê°€ì¹˜ í‚¤ì›Œë“œ ë¶„ìœ„ê¸°ì— ë§ëŠ” ë°°ê²½ ìŠ¤íƒ€ì¼]
- **í°íŠ¸/ê¸€ì ëŠë‚Œ:** [ê°€ì¹˜ í‚¤ì›Œë“œ ë¶„ìœ„ê¸°ì— ë§ëŠ” í°íŠ¸ ì¶”ì²œ]
- **ì „ë°˜ì ì¸ ë¶„ìœ„ê¸°:** ìœ„ ì»¬ëŸ¬ì™€ ìŠ¤íƒ€ì¼ì„ ì¡°í•©í•˜ì—¬ "[í†¤ì•¤ë§¤ë„ˆ]" ëŠë‚Œìœ¼ë¡œ ë””ìì¸í•´ ì£¼ì„¸ìš”.

## 3. í•µì‹¬ ì½˜í…ì¸  ë‚´ìš©
- **ë©”ì¸ ì¹´í”¼(Hero Title):** "[STEP 5 ì‚¶ì˜ ëª©ì ì„ ì„íŒ©íŠ¸ ìˆëŠ” í—¤ë“œë¼ì¸ìœ¼ë¡œ]"
- **ì„œë¸Œ ì¹´í”¼:** "[STEP 5 ëª©í‘œ 3ê°€ì§€ë¥¼ ìš”ì•½í•œ ë¬¸ì¥]"
- **ì£¼ìš” íŠ¹ì§•/ê°•ì  3ê°€ì§€:** [STEP 5ì˜ ëª©í‘œ 1, 2, 3ì„ ê°•ì  ì¹´ë“œë¡œ ë³€í™˜]
- **ìê¸°ì†Œê°œ:** [STEP 3 ë¡¤ëª¨ë¸ ë™ê²½ ì´ìœ  + STEP 4 ìœ ì‚° í¸ì§€ ë‚´ìš© ì¡°í•©]
- **ê²½í—˜ ìŠ¤í† ë¦¬:** [STEP 2ì˜ ê²½í—˜ 3ê°€ì§€ë¥¼ ìŠ¤í† ë¦¬í…”ë§ìœ¼ë¡œ]
- **ë§ˆì§€ë§‰ í–‰ë™ ìœ ë„(CTA):** "[ëª©í‘œì™€ ì—°ê²°ëœ í–‰ë™ ìœ ë„ ë¬¸êµ¬]"
- **ì—°ë½ì²˜ ë° ë§í¬:** [í‘œì§€ì˜ ì „í™”ë²ˆí˜¸ ìˆìœ¼ë©´ í¬í•¨]

---

# [ìš”ì²­ ì‚¬í•­: ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì´ë ‡ê²Œ ì‘ì„±í•´ ì£¼ì„¸ìš”]

## 1. í˜ì´ì§€ êµ¬ì¡° (Structure)
ì•„ë˜ ì„¹ì…˜ ìˆœì„œëŒ€ë¡œ êµ¬ì²´ì ì¸ **ë””ìì¸ ì§€ì‹œì‚¬í•­**ê³¼ **ë“¤ì–´ê°ˆ í…ìŠ¤íŠ¸**ë¥¼ ì‘ì„±í•´ ì£¼ì„¸ìš”.

**(1) í—¤ë” (Header)** - ë¡œê³ ì™€ ë©”ë‰´ êµ¬ì„±
**(2) íˆì–´ë¡œ ì„¹ì…˜ (Hero Section)** - ë©”ì¸ ì¹´í”¼ì™€ ë¹„ì£¼ì–¼
**(3) íŠ¹ì§•/ê°•ì  ì„¹ì…˜ (Features)** - ëª©í‘œ 3ê°€ì§€ë¥¼ ê°•ì  ì¹´ë“œë¡œ
**(4) ì†Œê°œ ë° ì‹ ë¢°ë„ (About/Proof)** - ë¡¤ëª¨ë¸ ë™ê²½ ì´ìœ  + ìœ ì‚° í¸ì§€ ê¸°ë°˜ ìê¸°ì†Œê°œ
**(5) ê²½í—˜ ì„¹ì…˜ (Experience)** - ì‚´ì•„ìˆìŒì„ ëŠë‚€ ê²½í—˜ 3ê°€ì§€
**(6) í–‰ë™ ìœ ë„ ë° í‘¸í„° (CTA & Footer)** - CTA ë²„íŠ¼ê³¼ ì—°ë½ì²˜

## 2. ì¸í„°ë™ì…˜ ë° ë””í…Œì¼
- **ë°˜ì‘í˜•:** ëª¨ë°”ì¼ì—ì„œë„ ì™„ë²½í•˜ê²Œ ë³´ì´ë„ë¡
- **ëª¨ì…˜:** ë¶€ë“œëŸ¬ìš´ í˜¸ë²„ íš¨ê³¼ì™€ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜

## 3. í†¤ì•¤ë§¤ë„ˆ
- ëª¨ë“  ë¬¸êµ¬ëŠ” STEP 1 í•µì‹¬ ê°€ì¹˜ í‚¤ì›Œë“œì˜ ë¶„ìœ„ê¸°ì— ë§ëŠ” ë§íˆ¬ë¡œ í†µì¼
---

ë§Œì•½ ì†ê¸€ì”¨ê°€ ì˜ ì•ˆ ë³´ì´ê±°ë‚˜ ë¹„ì–´ìˆë‹¤ë©´, ê·¸ ë¶€ë¶„ì€ [ë¯¸ì…ë ¥]ìœ¼ë¡œ í‘œì‹œí•˜ê³  í•©ë¦¬ì ì¸ ê¸°ë³¸ê°’ìœ¼ë¡œ ëŒ€ì²´í•´ì£¼ì„¸ìš”.`;

            // parts ë°°ì—´ êµ¬ì„±: í…ìŠ¤íŠ¸ í”„ë¡¬í”„íŠ¸ + ëª¨ë“  ì´ë¯¸ì§€
            const parts = [{ text: promptText }, ...imageParts];

            const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`,
                {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [
                            {
                                parts: parts
                            }
                        ],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 2000,
                        }
                    })
                }
            );

            if (!response.ok) {
                const errorData = await response.json();
                console.error('Gemini API Error:', errorData);

                // API í‚¤ ì˜¤ë¥˜ì¸ ê²½ìš° í‚¤ ì¬ì…ë ¥ ìœ ë„
                if (response.status === 400 || response.status === 403) {
                    localStorage.removeItem('gemini_api_key');
                    throw new Error('API í‚¤ê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
                throw new Error(`Gemini API ì˜¤ë¥˜: ${errorData.error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);
            }

            const data = await response.json();
            const generatedText = data.candidates?.[0]?.content?.parts?.[0]?.text || '';

            // í‚¤ì›Œë“œ ì¶”ì¶œ
            const keywordMatch = generatedText.match(/ì¶”ì¶œëœ í‚¤ì›Œë“œ[^:]*[:ï¼š]([^\n]+)/);
            const keywords = keywordMatch
                ? keywordMatch[1].split(/[,ï¼Œã€]/).map(k => k.trim().replace(/[#\-\*]/g, '')).filter(k => k)
                : ['ì°½ì˜ì ', 'ë”°ëœ»í•¨', 'ì „ë¬¸ì„±'];

            // í”„ë¡¬í”„íŠ¸ ì¶”ì¶œ
            const promptMatch = generatedText.match(/ì›¹ì‚¬ì´íŠ¸ ìƒì„± í”„ë¡¬í”„íŠ¸[^:]*[:ï¼š]\s*([\s\S]*?)$/i);
            const prompt = promptMatch
                ? promptMatch[1].trim()
                : generatedText;

            return {
                success: true,
                keywords: keywords.slice(0, 7),
                prompt: prompt || generatedText,
                rawResponse: generatedText
            };
        }

        // ì„œë²„ API í˜¸ì¶œ (ë°°í¬ í™˜ê²½ìš©) - ë‹¤ì¤‘ ì´ë¯¸ì§€ ì§€ì›
        async function callServerApi(imagesBase64) {
            const response = await fetch('/api/analyze', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ images: imagesBase64 })
            });

            if (!response.ok) {
                throw new Error('API ìš”ì²­ ì‹¤íŒ¨');
            }

            return await response.json();
        }

        // Drag and Drop - ë‹¤ì¤‘ íŒŒì¼ ì§€ì›
        const uploadZone = document.getElementById('uploadZone');

        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            handleFiles(files);
        });

        function handleFileSelect(event) {
            const files = Array.from(event.target.files);
            handleFiles(files);
        }

        // ë‹¤ì¤‘ íŒŒì¼ ì²˜ë¦¬
        function handleFiles(files) {
            const validFiles = files.filter(file => {
                if (!file.type.startsWith('image/')) {
                    return false;
                }
                if (file.size > 10 * 1024 * 1024) {
                    alert(`${file.name}: íŒŒì¼ í¬ê¸°ëŠ” 10MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.`);
                    return false;
                }
                return true;
            });

            // ìµœëŒ€ ê°œìˆ˜ ì²´í¬
            const remainingSlots = MAX_IMAGES - uploadedImages.length;
            if (validFiles.length > remainingSlots) {
                alert(`ìµœëŒ€ ${MAX_IMAGES}ì¥ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ${remainingSlots}ì¥ë§Œ ì¶”ê°€ë©ë‹ˆë‹¤.`);
            }

            const filesToAdd = validFiles.slice(0, remainingSlots);

            filesToAdd.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    uploadedImages.push(e.target.result);
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            });
        }

        // ì´ë¯¸ì§€ í”„ë¦¬ë·° ì—…ë°ì´íŠ¸
        function updateImagePreview() {
            const placeholder = document.getElementById('uploadPlaceholder');
            const preview = document.getElementById('imagePreview');
            const container = document.getElementById('previewContainer');
            const countSpan = document.getElementById('imageCount').querySelector('span');
            const uploadZone = document.getElementById('uploadZone');
            const extractBtn = document.getElementById('extractBtn');

            if (uploadedImages.length > 0) {
                placeholder.classList.add('hidden');
                preview.classList.remove('hidden');
                uploadZone.classList.add('has-image');
                extractBtn.disabled = false;

                // ì¸ë„¤ì¼ ìƒì„±
                container.innerHTML = uploadedImages.map((img, index) => `
                    <div class="image-thumbnail">
                        <img src="${img}" alt="Preview ${index + 1}" class="w-20 h-20 object-cover rounded-lg shadow-md">
                        <button class="remove-btn" onclick="event.stopPropagation(); removeImage(${index});">
                            <i class="fa-solid fa-times"></i>
                        </button>
                        <span class="absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs text-center py-0.5 rounded-b-lg">${index + 1}</span>
                    </div>
                `).join('');

                countSpan.textContent = uploadedImages.length;
            } else {
                placeholder.classList.remove('hidden');
                preview.classList.add('hidden');
                uploadZone.classList.remove('has-image');
                extractBtn.disabled = true;
                container.innerHTML = '';
            }
        }

        // ê°œë³„ ì´ë¯¸ì§€ ì‚­ì œ
        function removeImage(index) {
            uploadedImages.splice(index, 1);
            updateImagePreview();
        }

        async function extractFromImage() {
            if (uploadedImages.length === 0) return;

            // Show loading state
            const btn = document.getElementById('extractBtn');
            const btnText = document.getElementById('extractBtnText');
            const spinner = document.getElementById('extractSpinner');

            btn.disabled = true;
            btnText.textContent = IS_LOCAL ? 'AIê°€ ì›Œí¬ì§€ ë¶„ì„ ì¤‘... (ë¡œì»¬ ëª¨ë“œ)' : 'AIê°€ ì›Œí¬ì§€ ë¶„ì„ ì¤‘...';
            spinner.classList.remove('hidden');

            try {
                let data;

                if (IS_LOCAL) {
                    // ë¡œì»¬ í™˜ê²½: ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ Gemini API í˜¸ì¶œ
                    console.log(`ğŸ  ë¡œì»¬ ëª¨ë“œ: Gemini API ì§ì ‘ í˜¸ì¶œ (${uploadedImages.length}ì¥)`);
                    data = await callGeminiDirectly(uploadedImages);
                } else {
                    // ë°°í¬ í™˜ê²½: Vercel Serverless Function ì‚¬ìš©
                    console.log(`â˜ï¸ ë°°í¬ ëª¨ë“œ: ì„œë²„ API í˜¸ì¶œ (${uploadedImages.length}ì¥)`);
                    data = await callServerApi(uploadedImages);
                }

                if (data.success) {
                    displayResult(data.keywords, data.prompt);
                } else {
                    throw new Error(data.error || 'ë¶„ì„ ì‹¤íŒ¨');
                }

            } catch (error) {
                console.error('Error:', error);
                alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\n\n' + error.message);
            } finally {
                btn.disabled = false;
                btnText.textContent = 'í”„ë¡¬í”„íŠ¸ ìƒì„±í•˜ê¸°';
                spinner.classList.add('hidden');
            }
        }

        function displayResult(keywords, prompt) {
            // Show keywords
            document.getElementById('keywordsSection').classList.remove('hidden');
            const keywordTags = document.getElementById('keywordTags');
            keywordTags.innerHTML = keywords.map(k =>
                `<span class="px-3 py-1 bg-soft-gold/10 text-soft-gold rounded-full text-xs font-medium">#${k}</span>`
            ).join('');

            // Show prompt
            document.getElementById('promptPlaceholder').classList.add('hidden');
            document.getElementById('promptOutput').classList.remove('hidden');
            document.getElementById('promptText').textContent = prompt;
            document.getElementById('copyBtn').disabled = false;
        }

        function copyPrompt() {
            const promptText = document.getElementById('promptText').textContent;
            navigator.clipboard.writeText(promptText).then(() => {
                const btn = document.getElementById('copyBtn');
                const btnText = document.getElementById('copyBtnText');
                const btnIcon = btn.querySelector('i');

                btnText.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
                btnIcon.className = 'fa-solid fa-check';
                btn.classList.add('bg-green-500');
                btn.classList.remove('bg-soft-gold');

                setTimeout(() => {
                    btnText.textContent = 'í”„ë¡¬í”„íŠ¸ ë³µì‚¬í•˜ê¸°';
                    btnIcon.className = 'fa-regular fa-copy';
                    btn.classList.remove('bg-green-500');
                    btn.classList.add('bg-soft-gold');
                }, 2000);
            });
        }
    </script>
</body>

</html>
