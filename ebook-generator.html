<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-book í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° | Algrowithm</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pure-white': '#ffffff',
                        'soft-gray': '#f8f9fa',
                        'text-dark': '#1a1a1a',
                        'soft-gold': '#d4af37',
                    },
                    fontFamily: {
                        sans: ['Pretendard', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #fafafa;
            color: #1a1a1a;
        }

        /* Header Glassmorphism */
        .header-blur {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Dropdown Menu */
        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            min-width: 220px;
            padding: 8px 0;
            z-index: 100;
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .dropdown-item {
            display: block;
            padding: 12px 20px;
            color: #1a1a1a;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .dropdown-item:hover {
            background: rgba(212, 175, 55, 0.1);
            color: #d4af37;
        }

        /* Step Progress */
        .step-item {
            transition: all 0.3s ease;
        }

        .step-item.active .step-number {
            background: #d4af37;
            color: white;
        }

        .step-item.completed .step-number {
            background: #10b981;
            color: white;
        }

        .step-item.completed .step-number i {
            display: block;
        }

        .step-connector {
            height: 2px;
            background: #e5e7eb;
            transition: all 0.3s ease;
        }

        .step-connector.active {
            background: #d4af37;
        }

        /* Loading Spinner */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #d4af37;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Form Styles */
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            transition: all 0.2s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 48px;
        }

        /* Genre Cards */
        .genre-card {
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .genre-card:hover {
            border-color: #d4af37;
            transform: translateY(-2px);
        }

        .genre-card.selected {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.05);
        }

        /* Title Option Cards */
        .title-option {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .title-option:hover {
            border-color: #d4af37;
        }

        .title-option.selected {
            border-color: #d4af37;
            background: rgba(212, 175, 55, 0.05);
        }

        /* Result Section */
        .result-container {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            border-radius: 16px;
            padding: 24px;
        }

        .copy-btn {
            transition: all 0.2s ease;
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            border-top: 3px solid #d4af37;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Hide steps */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #1a1a1a;
            color: white;
            padding: 16px 28px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast i {
            color: #10b981;
        }
    </style>
</head>

<body class="antialiased min-h-screen">

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fa-solid fa-check-circle"></i>
        <span id="toast-message">ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 header-blur transition-all duration-300">
        <div class="w-full px-[60px] py-5 flex justify-between items-center">
            <a href="/" class="flex items-center gap-3 cursor-pointer">
                <img src="./assets/logo.svg" alt="Algrowithm Logo" class="w-10 h-10">
                <span class="text-2xl font-serif font-bold tracking-tight text-text-dark">Algrowithm</span>
            </a>

            <div class="flex items-center gap-10">
                <div class="hidden md:flex items-center gap-12 text-lg font-medium text-gray-700">
                    <a href="about.html" class="hover:text-soft-gold transition-colors">About</a>

                    <div class="dropdown">
                        <button class="hover:text-soft-gold transition-colors flex items-center gap-1">
                            ì‹¤ìŠµ
                            <i class="fa-solid fa-chevron-down text-[12px] ml-1"></i>
                        </button>
                        <div class="dropdown-menu">
                            <a href="workbook_1.html" class="dropdown-item">
                                <span class="text-soft-gold font-bold mr-2">01</span> ë‚˜ëŠ” ëˆ„êµ¬ì¸ê°€
                            </a>
                            <a href="workbook_2.html" class="dropdown-item">
                                <span class="text-soft-gold font-bold mr-2">02</span> ì´ë¯¸ì§€ ì•„ì´ë´í‹°í‹°
                            </a>
                            <a href="workbook_3.html" class="dropdown-item">
                                <span class="text-soft-gold font-bold mr-2">03</span> ì»¤ë¦¬ì–´ ë¸Œëœë”©
                            </a>
                            <div class="border-t border-gray-100 my-2"></div>
                            <a href="prompt-studio.html" class="dropdown-item">
                                <i class="fa-solid fa-wand-magic-sparkles text-soft-gold mr-2"></i> í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°
                            </a>
                        </div>
                    </div>

                    <a href="schedule.html" class="hover:text-soft-gold transition-colors">ì¼ì •</a>
                </div>

                <a href="workbook_1.html"
                    class="px-6 py-2.5 bg-text-dark text-white rounded-full text-sm font-bold hover:bg-soft-gold transition-all duration-300 shadow-lg flex items-center gap-2">
                    <i class="fa-solid fa-pen-nib"></i>
                    <span>ì‹œì‘í•˜ê¸°</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-16 px-6">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-12">
                <span class="text-soft-gold font-bold tracking-widest uppercase text-sm">E-book Generator</span>
                <h1 class="text-4xl md:text-5xl font-serif font-bold mt-4 mb-4">ë§ì¶¤í˜• ê¸€ì“°ê¸° í”„ë¡¬í”„íŠ¸ ìƒì„±</h1>
                <p class="text-gray-600 text-lg">AIë¥¼ í™œìš©í•´ ë‹¹ì‹ ë§Œì˜ E-bookì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ”<br>ë§ì¶¤í˜• í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
            </div>

            <!-- Step Progress -->
            <div class="flex items-center justify-center mb-12">
                <div class="flex items-center">
                    <div class="step-item active" data-step="1">
                        <div class="step-number w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600">
                            <span>1</span>
                            <i class="fa-solid fa-check hidden"></i>
                        </div>
                        <div class="text-xs mt-2 text-center font-medium">ì¥ë¥´ ì„ íƒ</div>
                    </div>
                    <div class="step-connector w-16 mx-2"></div>
                    <div class="step-item" data-step="2">
                        <div class="step-number w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600">
                            <span>2</span>
                            <i class="fa-solid fa-check hidden"></i>
                        </div>
                        <div class="text-xs mt-2 text-center font-medium">ì£¼ì œ ì…ë ¥</div>
                    </div>
                    <div class="step-connector w-16 mx-2"></div>
                    <div class="step-item" data-step="3">
                        <div class="step-number w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600">
                            <span>3</span>
                            <i class="fa-solid fa-check hidden"></i>
                        </div>
                        <div class="text-xs mt-2 text-center font-medium">ì„¸ë¶€ ì„¤ì •</div>
                    </div>
                    <div class="step-connector w-16 mx-2"></div>
                    <div class="step-item" data-step="4">
                        <div class="step-number w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600">
                            <span>4</span>
                            <i class="fa-solid fa-check hidden"></i>
                        </div>
                        <div class="text-xs mt-2 text-center font-medium">í”„ë¡¬í”„íŠ¸ ìƒì„±</div>
                    </div>
                </div>
            </div>

            <!-- Step 1: Genre Selection -->
            <div class="step-content active" data-step="1">
                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-2xl font-bold mb-6">ì–´ë–¤ ì¥ë¥´ì˜ ê¸€ì„ ì“°ì‹œê² ìŠµë‹ˆê¹Œ?</h2>

                    <div class="mb-8">
                        <h3 class="text-sm font-bold text-soft-gold mb-4 uppercase tracking-wider">ë¬¸í•™</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="genre-card" data-genre="ìˆ˜í•„">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-feather-pointed text-soft-gold"></i></div>
                                <div class="font-bold">ìˆ˜í•„ (ì—ì„¸ì´)</div>
                                <div class="text-sm text-gray-500">ê°œì¸ì  ê²½í—˜ê³¼ ì„±ì°°</div>
                            </div>
                            <div class="genre-card" data-genre="ì†Œì„¤">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-book-open text-soft-gold"></i></div>
                                <div class="font-bold">ì†Œì„¤</div>
                                <div class="text-sm text-gray-500">ìˆœë¬¸í•™/ëŒ€ì¤‘ì†Œì„¤</div>
                            </div>
                            <div class="genre-card" data-genre="ì‹œ">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-pen-fancy text-soft-gold"></i></div>
                                <div class="font-bold">ì‹œ</div>
                                <div class="text-sm text-gray-500">ì‹œì  í‘œí˜„ê³¼ ìš´ìœ¨</div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-sm font-bold text-soft-gold mb-4 uppercase tracking-wider">ë¹„ë¬¸í•™</h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="genre-card" data-genre="ìê¸°ê³„ë°œì„œ">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-rocket text-soft-gold"></i></div>
                                <div class="font-bold">ìê¸°ê³„ë°œì„œ</div>
                                <div class="text-sm text-gray-500">ì„±ì¥ê³¼ ë™ê¸°ë¶€ì—¬</div>
                            </div>
                            <div class="genre-card" data-genre="ì¸ë¬¸í•™">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-landmark text-soft-gold"></i></div>
                                <div class="font-bold">ì¸ë¬¸í•™ ë„ì„œ</div>
                                <div class="text-sm text-gray-500">ì² í•™, ì—­ì‚¬, ë¬¸í™”</div>
                            </div>
                            <div class="genre-card" data-genre="ì‹¬ë¦¬í•™">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-brain text-soft-gold"></i></div>
                                <div class="font-bold">ì‹¬ë¦¬í•™ ë„ì„œ</div>
                                <div class="text-sm text-gray-500">ë§ˆìŒê³¼ í–‰ë™ ì´í•´</div>
                            </div>
                            <div class="genre-card" data-genre="ì‚¬íšŒê²½ì œ">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-chart-line text-soft-gold"></i></div>
                                <div class="font-bold">ì‚¬íšŒ/ì •ì¹˜/ê²½ì œ</div>
                                <div class="text-sm text-gray-500">ì‚¬íšŒ ë¶„ì„ê³¼ ì „ë§</div>
                            </div>
                            <div class="genre-card" data-genre="ì‹¤ìš©ì„œ">
                                <div class="text-3xl mb-2"><i class="fa-solid fa-tools text-soft-gold"></i></div>
                                <div class="font-bold">ì‹¤ìš©ì„œ</div>
                                <div class="text-sm text-gray-500">ì‹¤ìš©ì  ê°€ì´ë“œ</div>
                            </div>
                        </div>
                    </div>

                    <button onclick="nextStep()" id="step1-next" disabled
                        class="w-full py-4 bg-text-dark text-white rounded-xl font-bold hover:bg-soft-gold transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        ë‹¤ìŒ ë‹¨ê³„ë¡œ <i class="fa-solid fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Topic Input -->
            <div class="step-content" data-step="2">
                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-2xl font-bold mb-2">í•µì‹¬ ì£¼ì œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</h2>
                    <p class="text-gray-500 mb-6">ì„ íƒí•˜ì‹  <span id="selected-genre-display" class="text-soft-gold font-bold"></span> ì¥ë¥´ì˜ í•µì‹¬ ì£¼ì œëŠ” ë¬´ì—‡ì¸ê°€ìš”?</p>

                    <!-- ì…ë ¥ ë°©ì‹ ì„ íƒ íƒ­ -->
                    <div class="flex gap-2 mb-6">
                        <button onclick="setTopicInputMode('manual')" id="topicModeManual"
                            class="flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all bg-text-dark text-white">
                            <i class="fa-solid fa-keyboard mr-2"></i>ì§ì ‘ ì…ë ¥
                        </button>
                        <button onclick="setTopicInputMode('image')" id="topicModeImage"
                            class="flex-1 py-3 px-4 rounded-xl font-bold text-sm transition-all bg-gray-100 text-gray-600">
                            <i class="fa-solid fa-camera mr-2"></i>ì›Œí¬ì§€ ì‚¬ì§„ìœ¼ë¡œ ì…ë ¥
                        </button>
                    </div>

                    <!-- ì§ì ‘ ì…ë ¥ ëª¨ë“œ -->
                    <div id="topicManualMode" class="mb-6">
                        <label class="block text-sm font-bold mb-2">í•µì‹¬ ì£¼ì œ *</label>
                        <textarea id="topic-input" class="form-input h-32" placeholder="ì˜ˆ: 30ëŒ€ ì§ì¥ì¸ì˜ ë²ˆì•„ì›ƒ ê·¹ë³µê¸°, ì‚¬ë‘ê³¼ ìƒì‹¤ì— ê´€í•œ ì´ì•¼ê¸°, AI ì‹œëŒ€ì˜ ìê¸°ê³„ë°œ ë“±"></textarea>
                        <p class="text-xs text-gray-400 mt-2">êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í• ìˆ˜ë¡ ë” ì¢‹ì€ í”„ë¡¬í”„íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤.</p>
                    </div>

                    <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ ëª¨ë“œ -->
                    <div id="topicImageMode" class="hidden mb-6">
                        <div class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-4 border border-amber-100 mb-4">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fa-solid fa-wand-magic-sparkles text-soft-gold"></i>
                                <span class="text-sm font-bold text-amber-700">AI ì›Œí¬ì§€ ë¶„ì„</span>
                            </div>
                            <p class="text-xs text-gray-600">ì‘ì„±í•œ ì›Œí¬ì§€ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ë‚´ìš©ì„ ë¶„ì„í•˜ì—¬ í•µì‹¬ ì£¼ì œë¥¼ ìë™ìœ¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
                        </div>

                        <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­ -->
                        <div id="workbookUploadArea" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer hover:border-soft-gold hover:bg-amber-50/30 transition-all mb-4"
                            onclick="document.getElementById('workbookImageInput').click()">
                            <input type="file" id="workbookImageInput" accept="image/*" class="hidden" onchange="handleWorkbookImageUpload(event)" multiple>
                            <div id="workbookUploadPlaceholder">
                                <i class="fa-solid fa-cloud-arrow-up text-4xl text-gray-400 mb-3"></i>
                                <p class="text-gray-600 font-medium">í´ë¦­í•˜ì—¬ ì›Œí¬ì§€ ì‚¬ì§„ ì—…ë¡œë“œ</p>
                                <p class="text-xs text-gray-400 mt-1">JPG, PNG, WEBP (ìµœëŒ€ 10ì¥)</p>
                            </div>
                            <div id="workbookUploadPreview" class="hidden">
                                <div id="workbookPreviewGrid" class="grid grid-cols-3 gap-2 mb-3"></div>
                                <p class="text-sm text-soft-gold font-medium"><span id="workbookImageCount">0</span>ì¥ì˜ ì´ë¯¸ì§€ê°€ ì„ íƒë¨</p>
                            </div>
                        </div>

                        <!-- ë¶„ì„ ë²„íŠ¼ -->
                        <button onclick="analyzeWorkbookImages()" id="analyzeWorkbookBtn" disabled
                            class="w-full py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-bold text-sm hover:opacity-90 transition-opacity flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                            <i class="fa-solid fa-sparkles"></i>
                            <span id="analyzeWorkbookBtnText">AIë¡œ ì£¼ì œ ì¶”ì¶œí•˜ê¸°</span>
                            <div id="analyzeWorkbookSpinner" class="loading-spinner hidden"></div>
                        </button>
                        <p class="text-[10px] text-gray-400 mt-2 text-center">* Gemini Vision API ì‚¬ìš© (ì´ë¯¸ì§€ë‹¹ ì•½ $0.01)</p>

                        <!-- ë¶„ì„ ê²°ê³¼ -->
                        <div id="workbookAnalysisResult" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-xl">
                            <div class="flex items-center gap-2 mb-2">
                                <i class="fa-solid fa-check-circle text-green-500"></i>
                                <span class="text-sm font-bold text-green-700">ë¶„ì„ ì™„ë£Œ!</span>
                            </div>
                            <p class="text-xs text-gray-600 mb-2">ì¶”ì¶œëœ ì£¼ì œê°€ ì•„ë˜ ì…ë ¥ë€ì— ìë™ìœ¼ë¡œ ì±„ì›Œì¡ŒìŠµë‹ˆë‹¤. í•„ìš”ì‹œ ìˆ˜ì •í•˜ì„¸ìš”.</p>
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <button onclick="prevStep()" class="flex-1 py-4 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors">
                            <i class="fa-solid fa-arrow-left mr-2"></i> ì´ì „
                        </button>
                        <button onclick="nextStep()" id="step2-next" disabled
                            class="flex-1 py-4 bg-text-dark text-white rounded-xl font-bold hover:bg-soft-gold transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                            ë‹¤ìŒ ë‹¨ê³„ë¡œ <i class="fa-solid fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 3: Detailed Settings -->
            <div class="step-content" data-step="3">
                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-2xl font-bold mb-6">ì„¸ë¶€ ì„¤ì •</h2>

                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-bold mb-2">1. ë…ì ë¶„ì„ (íƒ€ê²Ÿ ë…ìì¸µ)</label>
                            <input type="text" id="target-reader" class="form-input" placeholder="ì˜ˆ: 20-30ëŒ€ ì§ì¥ì¸, ì·¨ì¤€ìƒ, ìœ¡ì•„ë§˜ ë“±">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">2. ëª©í‘œ (ë…ìê°€ ì–»ê¸¸ ë°”ë¼ëŠ” ê²ƒ)</label>
                            <input type="text" id="goal" class="form-input" placeholder="ì˜ˆ: ë²ˆì•„ì›ƒ ê·¹ë³µ ë°©ë²•, ìœ„ë¡œì™€ ê³µê°, ì‹¤ìš©ì  ì§€ì‹ ë“±">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">3. ìŠ¤íƒ€ì¼/í†¤</label>
                            <select id="style" class="form-input form-select">
                                <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                <option value="ì¹œê·¼í•˜ê³  í¸ì•ˆí•œ">ì¹œê·¼í•˜ê³  í¸ì•ˆí•œ</option>
                                <option value="ì „ë¬¸ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ”">ì „ë¬¸ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ”</option>
                                <option value="ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ê°€ë²¼ìš´">ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ê°€ë²¼ìš´</option>
                                <option value="ì§„ì¤‘í•˜ê³  ê¹Šì´ ìˆëŠ”">ì§„ì¤‘í•˜ê³  ê¹Šì´ ìˆëŠ”</option>
                                <option value="ì„œì •ì ì´ê³  ê°ì„±ì ì¸">ì„œì •ì ì´ê³  ê°ì„±ì ì¸</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">4. í•µì‹¬ ì†Œì¬ (ë°˜ë“œì‹œ í¬í•¨í•  ìš”ì†Œ)</label>
                            <input type="text" id="key-elements" class="form-input" placeholder="ì˜ˆ: ê°œì¸ ê²½í—˜ë‹´, ì—°êµ¬ ìë£Œ, ì¸ìš©ë¬¸ ë“±">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">5. ì°¨ë³„ì  (ë…ì°½ì  ê´€ì )</label>
                            <input type="text" id="unique-point" class="form-input" placeholder="ì˜ˆ: ì‹¤ì œ ê²½í—˜ ê¸°ë°˜, í•œêµ­ì  ë§¥ë½, ìƒˆë¡œìš´ ì ‘ê·¼ë²• ë“±">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-bold mb-2">6. ì „ì²´ ë¶„ëŸ‰ (A5 ê¸°ì¤€)</label>
                                <select id="page-count" class="form-input form-select">
                                    <option value="20-40í˜ì´ì§€">20-40í˜ì´ì§€ (ì†Œì±…ì/ì§§ì€ ê¸€)</option>
                                    <option value="40-60í˜ì´ì§€">40-60í˜ì´ì§€ (ë¯¸ë‹ˆë¶)</option>
                                    <option value="60-80í˜ì´ì§€">60-80í˜ì´ì§€ (í¬í† ì—ì„¸ì´)</option>
                                    <option value="80-100í˜ì´ì§€" selected>80-100í˜ì´ì§€ (ì¼ë°˜)</option>
                                    <option value="100-150í˜ì´ì§€">100-150í˜ì´ì§€ (ì—ì„¸ì´/ì‹œì§‘)</option>
                                    <option value="150-200í˜ì´ì§€">150-200í˜ì´ì§€ (ì „ë¬¸ì„œ)</option>
                                    <option value="200-300í˜ì´ì§€">200-300í˜ì´ì§€ (ëŒ€ì‘)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-bold mb-2">7. ë¬¸ë‹¨ í˜•ì‹</label>
                                <select id="paragraph-style" class="form-input form-select">
                                    <option value="ì „í†µì  ë¬¸ë‹¨ (ë“¤ì—¬ì“°ê¸°)">ì „í†µì  ë¬¸ë‹¨ (ë“¤ì—¬ì“°ê¸°)</option>
                                    <option value="ì‹œì  í–‰ê°ˆì´ (ì¤„ë°”ê¿ˆ)">ì‹œì  í–‰ê°ˆì´ (ì¤„ë°”ê¿ˆ)</option>
                                    <option value="ëŒ€í™”ì²´ ì¤‘ì‹¬">ëŒ€í™”ì²´ ì¤‘ì‹¬</option>
                                    <option value="ì§§ì€ ë¬¸ì¥ ë‚˜ì—´">ì§§ì€ ë¬¸ì¥ ë‚˜ì—´</option>
                                    <option value="ë¸”ë¡œê·¸/SNS ìŠ¤íƒ€ì¼">ë¸”ë¡œê·¸/SNS ìŠ¤íƒ€ì¼</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="flex gap-4 mt-8">
                        <button onclick="prevStep()" class="flex-1 py-4 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors">
                            <i class="fa-solid fa-arrow-left mr-2"></i> ì´ì „
                        </button>
                        <button onclick="generatePrompt()" id="generate-btn"
                            class="flex-1 py-4 bg-soft-gold text-white rounded-xl font-bold hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2">
                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                            <span id="generate-btn-text">í”„ë¡¬í”„íŠ¸ ìƒì„±í•˜ê¸°</span>
                            <div id="generate-spinner" class="spinner hidden"></div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Result -->
            <div class="step-content" data-step="4">
                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold">ìƒì„±ëœ í”„ë¡¬í”„íŠ¸</h2>
                        <button onclick="copyPrompt()" id="copy-btn"
                            class="copy-btn px-6 py-2 bg-soft-gold text-white rounded-lg font-bold hover:bg-yellow-600 transition-colors flex items-center gap-2">
                            <i class="fa-solid fa-copy"></i>
                            <span>ë³µì‚¬í•˜ê¸°</span>
                        </button>
                    </div>

                    <p class="text-gray-500 mb-4">ì•„ë˜ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬í•˜ì—¬ ChatGPT, Claude, Gemini ë“± AIì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.</p>

                    <div class="result-container">
                        <pre id="result-prompt" class="text-gray-300 text-sm whitespace-pre-wrap font-mono leading-relaxed max-h-[500px] overflow-y-auto"></pre>
                    </div>

                    <div class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100">
                        <h3 class="text-sm font-bold text-blue-800 mb-2 flex items-center gap-2">
                            <i class="fa-solid fa-lightbulb"></i> ì‚¬ìš© ë°©ë²•
                        </h3>
                        <ol class="text-sm text-blue-700 space-y-1 list-decimal list-inside">
                            <li>ìœ„ í”„ë¡¬í”„íŠ¸ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤</li>
                            <li>ChatGPT, Claude, Gemini ë“± AI ì±„íŒ…ì— ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤</li>
                            <li>"ì‹œì‘"ì„ ì…ë ¥í•˜ë©´ AIê°€ ëª©ì°¨ì™€ ì„¸ê³„ê´€ì„ ìƒì„±í•©ë‹ˆë‹¤</li>
                            <li>ì›í•˜ëŠ” ì±•í„°ë¥¼ ìš”ì²­í•˜ë©´ ë³¸ë¬¸ì´ ì‘ì„±ë©ë‹ˆë‹¤</li>
                        </ol>
                    </div>

                    <div class="flex gap-4 mt-8">
                        <button onclick="resetAll()" class="flex-1 py-4 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200 transition-colors">
                            <i class="fa-solid fa-rotate-left mr-2"></i> ì²˜ìŒë¶€í„° ë‹¤ì‹œ
                        </button>
                    </div>

                    <!-- E-book PDF ìƒì„±ìœ¼ë¡œ ì´ë™ -->
                    <div class="mt-6 p-6 bg-gradient-to-r from-soft-gold/10 to-yellow-100/50 rounded-xl border border-soft-gold/30">
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-10 h-10 bg-soft-gold rounded-full flex items-center justify-center">
                                <i class="fa-solid fa-file-pdf text-white"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-text-dark">E-book PDFë¡œ ë°”ë¡œ ë§Œë“¤ê¸°</h3>
                                <p class="text-sm text-gray-600">í”„ë¡¬í”„íŠ¸ë¥¼ ìˆ˜ì •í•˜ê³  PDF ì „ìì±…ìœ¼ë¡œ ë°”ë¡œ ì œì‘í•˜ì„¸ìš”</p>
                            </div>
                        </div>
                        <button onclick="goToEbookPDF()" class="w-full py-4 bg-soft-gold text-white rounded-xl font-bold hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2">
                            <i class="fa-solid fa-arrow-right"></i>
                            <span>E-book PDF ë§Œë“¤ëŸ¬ ê°€ê¸°</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-text-dark py-12 text-white">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-3">
                <img src="./assets/logo.svg" alt="Logo" class="w-7 h-7 invert">
                <span class="text-lg font-serif font-bold">Algrowithm</span>
            </div>
            <p class="text-gray-500 text-sm">&copy; 2025 Algrowithm. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // State
        let currentStep = 1;
        let formData = {
            genre: '',
            topic: '',
            targetReader: '',
            goal: '',
            style: '',
            keyElements: '',
            uniquePoint: '',
            pageCount: '150-200í˜ì´ì§€',
            paragraphStyle: 'Aíƒ€ì…: ì „í†µì  ë¬¸ë‹¨',
            selectedTitle: ''
        };

        // ì›Œí¬ì§€ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê´€ë ¨
        let workbookImages = [];
        let topicInputMode = 'manual'; // 'manual' or 'image'

        // Topic ì…ë ¥ ëª¨ë“œ ì „í™˜
        function setTopicInputMode(mode) {
            topicInputMode = mode;
            const manualBtn = document.getElementById('topicModeManual');
            const imageBtn = document.getElementById('topicModeImage');
            const manualSection = document.getElementById('topicManualMode');
            const imageSection = document.getElementById('topicImageMode');

            if (mode === 'manual') {
                manualBtn.classList.remove('bg-gray-100', 'text-gray-600');
                manualBtn.classList.add('bg-text-dark', 'text-white');
                imageBtn.classList.remove('bg-text-dark', 'text-white');
                imageBtn.classList.add('bg-gray-100', 'text-gray-600');
                manualSection.classList.remove('hidden');
                imageSection.classList.add('hidden');
            } else {
                imageBtn.classList.remove('bg-gray-100', 'text-gray-600');
                imageBtn.classList.add('bg-text-dark', 'text-white');
                manualBtn.classList.remove('bg-text-dark', 'text-white');
                manualBtn.classList.add('bg-gray-100', 'text-gray-600');
                imageSection.classList.remove('hidden');
                manualSection.classList.add('hidden');
            }
        }

        // ì›Œí¬ì§€ ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¸ë“¤ëŸ¬
        function handleWorkbookImageUpload(event) {
            const files = Array.from(event.target.files);
            if (files.length === 0) return;

            // ìµœëŒ€ 10ì¥ ì œí•œ
            const newImages = files.slice(0, 10 - workbookImages.length);

            newImages.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    workbookImages.push({
                        file: file,
                        dataUrl: e.target.result
                    });
                    updateWorkbookImagePreview();
                };
                reader.readAsDataURL(file);
            });
        }

        // ì´ë¯¸ì§€ í”„ë¦¬ë·° ì—…ë°ì´íŠ¸
        function updateWorkbookImagePreview() {
            const placeholder = document.getElementById('workbookUploadPlaceholder');
            const preview = document.getElementById('workbookUploadPreview');
            const grid = document.getElementById('workbookPreviewGrid');
            const count = document.getElementById('workbookImageCount');
            const analyzeBtn = document.getElementById('analyzeWorkbookBtn');

            if (workbookImages.length > 0) {
                placeholder.classList.add('hidden');
                preview.classList.remove('hidden');
                count.textContent = workbookImages.length;
                analyzeBtn.disabled = false;

                grid.innerHTML = workbookImages.map((img, idx) => `
                    <div class="relative">
                        <img src="${img.dataUrl}" class="w-full h-20 object-cover rounded-lg">
                        <button onclick="removeWorkbookImage(${idx}); event.stopPropagation();"
                            class="absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center hover:bg-red-600">
                            <i class="fa-solid fa-times"></i>
                        </button>
                    </div>
                `).join('');
            } else {
                placeholder.classList.remove('hidden');
                preview.classList.add('hidden');
                analyzeBtn.disabled = true;
            }
        }

        // ì´ë¯¸ì§€ ì œê±°
        function removeWorkbookImage(index) {
            workbookImages.splice(index, 1);
            updateWorkbookImagePreview();
        }

        // AIë¡œ ì›Œí¬ì§€ ì´ë¯¸ì§€ ë¶„ì„
        async function analyzeWorkbookImages() {
            if (workbookImages.length === 0) return;

            const btn = document.getElementById('analyzeWorkbookBtn');
            const btnText = document.getElementById('analyzeWorkbookBtnText');
            const spinner = document.getElementById('analyzeWorkbookSpinner');
            const resultDiv = document.getElementById('workbookAnalysisResult');

            btn.disabled = true;
            btnText.textContent = 'ë¶„ì„ ì¤‘...';
            spinner.classList.remove('hidden');

            try {
                // ì´ë¯¸ì§€ mimeType ìë™ ê°ì§€
                const imageParts = workbookImages.map(img => {
                    const dataUrl = img.dataUrl;
                    const mimeMatch = dataUrl.match(/data:([^;]+);base64,/);
                    const mimeType = mimeMatch ? mimeMatch[1] : 'image/jpeg';
                    const base64Data = dataUrl.split(',')[1];
                    return {
                        inlineData: {
                            data: base64Data,
                            mimeType: mimeType
                        }
                    };
                });

                console.log('ì´ë¯¸ì§€ ê°œìˆ˜:', imageParts.length);
                console.log('ì²« ë²ˆì§¸ ì´ë¯¸ì§€ mimeType:', imageParts[0]?.inlineData?.mimeType);

                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyClStR_7nbDAQLKWczbYAhBPTYQ0TaV8tU', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                ...imageParts,
                                {
                                    text: `ë‹¹ì‹ ì€ E-book ì‘ê°€ë¥¼ ìœ„í•œ ì „ë¬¸ ë¶„ì„ê°€ì…ë‹ˆë‹¤. ì´ ì›Œí¬ì§€ ì´ë¯¸ì§€ì—ì„œ ì‚¬ìš©ìê°€ ì§ì ‘ ì†ìœ¼ë¡œ ì‘ì„±í•œ ë‹µë³€ë§Œ ì¶”ì¶œí•´ì£¼ì„¸ìš”.

## ë¶„ì„ ì§€ì¹¨:
- "*ì°¸ê³ *", "ì˜ˆì‹œ", "ì‘ì„± ë°©ë²•" ë“± ì¸ì‡„ëœ ì•ˆë‚´ ë¬¸êµ¬ëŠ” ë¬´ì‹œí•˜ì„¸ìš”
- ì˜¤ì§ ì‚¬ìš©ìê°€ í•„ê¸°í•œ ë‚´ìš©(ì†ê¸€ì”¨, íƒ€ì´í•‘ëœ ê°œì¸ ë‹µë³€)ì—ë§Œ ì§‘ì¤‘í•˜ì„¸ìš”
- ë¹ˆì¹¸ì— ì‘ì„±ëœ ë‹µë³€, ë©”ëª¨, ê°œì¸ì ì¸ ìƒê°ì„ ì¶”ì¶œí•˜ì„¸ìš”

## ì‘ë‹µ í˜•ì‹ (E-book ì§‘í•„ìš©):

1. **ë‚˜ì˜ ì´ì•¼ê¸° í•µì‹¬**: (ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë‚´ìš©ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ë©”ì‹œì§€ í•œ ë¬¸ì¥)

2. **ì±…ì˜ ì†Œì¬ë“¤**:
   - ê²½í—˜/ì—í”¼ì†Œë“œ: (ì‚¬ìš©ìê°€ ì–¸ê¸‰í•œ êµ¬ì²´ì ì¸ ê²½í—˜ë“¤)
   - ê°€ì¹˜ê´€/ì‹ ë…: (ì‚¬ìš©ìê°€ í‘œí˜„í•œ ë¯¿ìŒì´ë‚˜ ê°€ì¹˜)
   - ê°ì •/ê¹¨ë‹¬ìŒ: (ì‚¬ìš©ìê°€ ëŠë‚€ ê°ì •ì´ë‚˜ ì¸ì‚¬ì´íŠ¸)

3. **E-book ë°©í–¥ ì œì•ˆ**:
   - ì¶”ì²œ ì¥ë¥´: (ìê¸°ê³„ë°œ, ì—ì„¸ì´, ìì„œì „ ë“±)
   - íƒ€ê²Ÿ ë…ì: (ì´ ì´ì•¼ê¸°ê°€ ê³µê°ë  ë…ìì¸µ)
   - ì„œìˆ  í†¤: (ì§„ì†”í•œ, ìœ ë¨¸ëŸ¬ìŠ¤í•œ, ì„±ì°°ì ì¸ ë“±)

4. **ì›ë³¸ í•„ê¸° ë‚´ìš©**: (ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë‚´ìš©ì„ ìˆëŠ” ê·¸ëŒ€ë¡œ ì •ë¦¬)

ì´ë¯¸ì§€ê°€ íë¦¬ë”ë¼ë„ ì†ê¸€ì”¨ ë‚´ìš©ì„ ìµœëŒ€í•œ í•´ë…í•´ì£¼ì„¸ìš”.`
                                }
                            ]
                        }]
                    })
                });

                const data = await response.json();
                console.log('API ì‘ë‹µ:', data);

                // API ì—ëŸ¬ ì²´í¬
                if (data.error) {
                    throw new Error(data.error.message || 'API ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }

                if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                    const analysisResult = data.candidates[0].content.parts[0].text;

                    // í•µì‹¬ ì£¼ì œ ì¶”ì¶œí•˜ì—¬ topic-inputì— ì±„ìš°ê¸°
                    const topicMatch = analysisResult.match(/í•µì‹¬ ì£¼ì œ[:\s]*(.+?)(?:\n|2\.|$)/);
                    const topicExtracted = topicMatch ? topicMatch[1].replace(/\*\*/g, '').trim() : analysisResult.substring(0, 200);

                    document.getElementById('topic-input').value = topicExtracted + '\n\n[AI ë¶„ì„ ê²°ê³¼]\n' + analysisResult;
                    formData.topic = document.getElementById('topic-input').value;

                    // step2-next ë²„íŠ¼ í™œì„±í™”
                    document.getElementById('step2-next').disabled = false;

                    // ê²°ê³¼ í‘œì‹œ
                    resultDiv.classList.remove('hidden');

                    // ì§ì ‘ ì…ë ¥ ëª¨ë“œë¡œ ì „í™˜í•˜ì—¬ ê²°ê³¼ í™•ì¸
                    setTopicInputMode('manual');
                } else if (data.candidates && data.candidates[0]?.finishReason === 'SAFETY') {
                    throw new Error('ì´ë¯¸ì§€ê°€ ì•ˆì „ ì •ì±…ì— ì˜í•´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì‹œë„í•´ì£¼ì„¸ìš”.');
                } else {
                    console.error('ì˜ˆìƒì¹˜ ëª»í•œ ì‘ë‹µ:', JSON.stringify(data, null, 2));
                    throw new Error('ë¶„ì„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                }
            } catch (error) {
                console.error('ì›Œí¬ì§€ ë¶„ì„ ì˜¤ë¥˜:', error);
                alert('ì›Œí¬ì§€ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:\n' + error.message + '\n\në¸Œë¼ìš°ì € ì½˜ì†”(F12)ì—ì„œ ìì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            } finally {
                btn.disabled = false;
                btnText.textContent = 'AIë¡œ ì£¼ì œ ì¶”ì¶œí•˜ê¸°';
                spinner.classList.add('hidden');
            }
        }

        // ëª¨ë°”ì¼ í‚¤ë³´ë“œ ë’¤ë¡œê°€ê¸° ì²˜ë¦¬ (ê°¤ëŸ­ì‹œ/ì•ˆë“œë¡œì´ë“œ í˜¸í™˜)
        // í•µì‹¬: AndroidëŠ” í‚¤ë³´ë“œ ë‹«ê¸° ë²„íŠ¼ ëˆ„ë¥´ë©´ popstate ë°œìƒ + í‚¤ë³´ë“œ ìë™ ë‹«í˜
        // ë”°ë¼ì„œ pushStateë¥¼ í•˜ì§€ ì•Šê³ , popstate ë°œìƒ ì‹œ í‚¤ë³´ë“œê°€ ë°©ê¸ˆ ë‹«í˜”ìœ¼ë©´ ë¬´ì‹œë§Œ í•¨
        (function initMobileKeyboard() {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (!isMobile) return;

            // ========== ë””ë²„ê·¸ UI ìƒì„± ==========
            const debugPanel = document.createElement('div');
            debugPanel.id = 'keyboard-debug';
            debugPanel.style.cssText = `
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: rgba(0,0,0,0.85);
                color: #0f0;
                font-family: monospace;
                font-size: 11px;
                padding: 8px;
                z-index: 99999;
                max-height: 30vh;
                overflow-y: auto;
            `;
            debugPanel.innerHTML = '<div style="color:#ff0;margin-bottom:4px;">ğŸ”§ í‚¤ë³´ë“œ ë””ë²„ê·¸ v2</div><div id="debug-log"></div>';
            document.body.appendChild(debugPanel);

            const debugLog = document.getElementById('debug-log');
            let logCount = 0;
            function log(msg, color = '#0f0') {
                logCount++;
                const time = new Date().toLocaleTimeString('ko-KR', {hour12:false});
                debugLog.innerHTML = `<div style="color:${color}">[${logCount}] ${time} ${msg}</div>` + debugLog.innerHTML;
                if (debugLog.children.length > 30) debugLog.lastChild.remove();
            }
            // ========== ë””ë²„ê·¸ UI ë ==========

            let lastInputFocusTime = 0;  // ë§ˆì§€ë§‰ ì…ë ¥ì°½ í¬ì»¤ìŠ¤ ì‹œê°„
            let lastKeyboardCloseTime = 0;  // í‚¤ë³´ë“œ ë‹«íŒ ì‹œê°„
            let keyboardVisible = false;
            const initialViewportHeight = window.visualViewport?.height || window.innerHeight;

            log(`ì´ˆê¸°í™”: height=${Math.round(initialViewportHeight)}px`, '#0ff');

            // ì…ë ¥ì°½ í¬ì»¤ìŠ¤ ê°ì§€
            document.addEventListener('focusin', (e) => {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                    lastInputFocusTime = Date.now();
                    log(`focusin: ${e.target.tagName}#${e.target.id || '?'}`, '#aaf');
                }
            });

            // í‚¤ë³´ë“œ ìƒíƒœ ê°ì§€ (visualViewport)
            if (window.visualViewport) {
                window.visualViewport.addEventListener('resize', () => {
                    const currentHeight = window.visualViewport.height;
                    const heightDiff = initialViewportHeight - currentHeight;
                    const wasKeyboardVisible = keyboardVisible;
                    keyboardVisible = heightDiff > 150;

                    if (!keyboardVisible && wasKeyboardVisible) {
                        lastKeyboardCloseTime = Date.now();
                        log(`â¬‡ï¸ í‚¤ë³´ë“œ ë‹«í˜ (diff=${Math.round(heightDiff)})`, '#ff0');
                    } else if (keyboardVisible && !wasKeyboardVisible) {
                        log(`â¬†ï¸ í‚¤ë³´ë“œ ì—´ë¦¼ (diff=${Math.round(heightDiff)})`, '#0f0');
                    }
                });
            }

            // í˜ì´ì§€ ì§„ì… ì‹œ ì´ˆê¸° íˆìŠ¤í† ë¦¬ ìƒíƒœ ì„¤ì •
            // ì´ë ‡ê²Œ í•˜ë©´ ë’¤ë¡œê°€ê¸° ì‹œ popstateê°€ ë°œìƒí•˜ê³ , ìš°ë¦¬ê°€ ì œì–´ ê°€ëŠ¥
            if (!history.state || !history.state.page) {
                history.replaceState({ page: 'ebook-generator' }, '');
                log(`ì´ˆê¸° state ì„¤ì •`, '#0ff');
            }

            // ë’¤ë¡œê°€ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬
            window.addEventListener('popstate', (e) => {
                const timeSinceKeyboardClose = Date.now() - lastKeyboardCloseTime;
                const timeSinceFocus = Date.now() - lastInputFocusTime;

                log(`ğŸ”™ popstate! closeAge=${timeSinceKeyboardClose}ms focusAge=${timeSinceFocus}ms`, '#f0f');

                // í‚¤ë³´ë“œê°€ 500ms ì´ë‚´ì— ë‹«í˜”ìœ¼ë©´ = í‚¤ë³´ë“œ ë‹«ê¸° ë²„íŠ¼ìœ¼ë¡œ ì¸í•œ popstate
                // ì´ ê²½ìš° ë’¤ë¡œê°€ê¸°ë¥¼ ë§‰ê³  í˜„ì¬ í˜ì´ì§€ ìœ ì§€
                if (timeSinceKeyboardClose < 500) {
                    log(`â†’ í‚¤ë³´ë“œ ë‹«ê¸°ë¡œ ì¸í•œ popstate, ë¬´ì‹œ`, '#ff0');
                    // íˆìŠ¤í† ë¦¬ë¥¼ ë‹¤ì‹œ ì•ìœ¼ë¡œ (ë’¤ë¡œê°€ê¸° ì·¨ì†Œ)
                    history.pushState({ page: 'ebook-generator' }, '');
                    return;
                }

                // ì§„ì§œ ë’¤ë¡œê°€ê¸° - í—ˆìš©
                log(`â†’ ì§„ì§œ ë’¤ë¡œê°€ê¸°, í—ˆìš©`, '#0f0');
                // ê¸°ë³¸ ë™ì‘ í—ˆìš© (ë’¤ë¡œê°€ê¸°)
                history.back();
            });

            log(`v2 ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ`, '#0ff');
        })();

        // Genre selection
        document.querySelectorAll('.genre-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.genre-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                formData.genre = card.dataset.genre;
                document.getElementById('step1-next').disabled = false;
            });
        });

        // Topic input validation
        document.getElementById('topic-input').addEventListener('input', (e) => {
            formData.topic = e.target.value;
            document.getElementById('step2-next').disabled = e.target.value.trim().length < 5;
        });

        // Step navigation
        function updateStepDisplay() {
            // Update step items
            document.querySelectorAll('.step-item').forEach((item, index) => {
                const stepNum = index + 1;
                item.classList.remove('active', 'completed');

                if (stepNum < currentStep) {
                    item.classList.add('completed');
                } else if (stepNum === currentStep) {
                    item.classList.add('active');
                }
            });

            // Update connectors
            document.querySelectorAll('.step-connector').forEach((connector, index) => {
                if (index < currentStep - 1) {
                    connector.classList.add('active');
                } else {
                    connector.classList.remove('active');
                }
            });

            // Update content visibility
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
                if (parseInt(content.dataset.step) === currentStep) {
                    content.classList.add('active');
                }
            });

            // Update genre display
            if (currentStep === 2) {
                document.getElementById('selected-genre-display').textContent = formData.genre;
            }
        }

        function nextStep() {
            if (currentStep < 4) {
                currentStep++;
                updateStepDisplay();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function resetAll() {
            currentStep = 1;
            formData = {
                genre: '',
                topic: '',
                targetReader: '',
                goal: '',
                style: '',
                keyElements: '',
                uniquePoint: '',
                pageCount: '150-200í˜ì´ì§€',
                paragraphStyle: 'Aíƒ€ì…: ì „í†µì  ë¬¸ë‹¨',
                selectedTitle: ''
            };

            document.querySelectorAll('.genre-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('topic-input').value = '';
            document.getElementById('target-reader').value = '';
            document.getElementById('goal').value = '';
            document.getElementById('style').value = '';
            document.getElementById('key-elements').value = '';
            document.getElementById('unique-point').value = '';
            document.getElementById('step1-next').disabled = true;
            document.getElementById('step2-next').disabled = true;

            updateStepDisplay();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Generate prompt
        function generatePrompt() {
            // Collect all form data
            formData.targetReader = document.getElementById('target-reader').value || 'ì¼ë°˜ ë…ì';
            formData.goal = document.getElementById('goal').value || 'ìœ ìµí•œ ì •ë³´ì™€ ì¸ì‚¬ì´íŠ¸';
            formData.style = document.getElementById('style').value || 'ì¹œê·¼í•˜ê³  í¸ì•ˆí•œ';
            formData.keyElements = document.getElementById('key-elements').value || 'ê°œì¸ ê²½í—˜ê³¼ ì‚¬ë¡€';
            formData.uniquePoint = document.getElementById('unique-point').value || 'ì €ìë§Œì˜ ë…ì°½ì  ê´€ì ';
            formData.pageCount = document.getElementById('page-count').value;
            formData.paragraphStyle = document.getElementById('paragraph-style').value;

            // Show loading
            const btn = document.getElementById('generate-btn');
            const btnText = document.getElementById('generate-btn-text');
            const spinner = document.getElementById('generate-spinner');

            btn.disabled = true;
            btnText.textContent = 'ìƒì„± ì¤‘...';
            spinner.classList.remove('hidden');

            // Simulate generation (in real case, could call API)
            setTimeout(() => {
                const prompt = createPrompt();
                document.getElementById('result-prompt').textContent = prompt;

                btn.disabled = false;
                btnText.textContent = 'í”„ë¡¬í”„íŠ¸ ìƒì„±í•˜ê¸°';
                spinner.classList.add('hidden');

                currentStep = 4;
                updateStepDisplay();

                // ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤ (requestAnimationFrame ì‚¬ìš©ìœ¼ë¡œ íŠ•ê¹€ ë°©ì§€)
                requestAnimationFrame(() => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }, 1500);
        }

        function createPrompt() {
            const isLiterature = ['ìˆ˜í•„', 'ì†Œì„¤', 'ì‹œ'].includes(formData.genre);

            const worldBuildingContent = isLiterature ? `
**[ë¬¸í•™ ì¥ë¥´ì˜ ê²½ìš° í¬í•¨ ìš”ì†Œ]**
- ì£¼ìš” ì¸ë¬¼ ì„¤ì • (ì£¼ì¸ê³µ, ì¡°ì—°, ì ëŒ€ì ë“±) - 1-2í˜ì´ì§€
- ì¸ë¬¼ ê°„ ê´€ê³„ë„ - 1í˜ì´ì§€
- ì‹œê°„ì /ê³µê°„ì  ë°°ê²½ ì„¤ì • - 1-2í˜ì´ì§€
- ì£¼ìš” ì‚¬ê±´ ì—°í‘œ ë° ê°ˆë“± êµ¬ì¡° - 2-3í˜ì´ì§€
- ì£¼ì œ ì˜ì‹ê³¼ ìƒì§•ì²´ê³„ - 1í˜ì´ì§€` : `
**[ë¹„ë¬¸í•™ ì¥ë¥´ì˜ ê²½ìš° í¬í•¨ ìš”ì†Œ]**
- í•µì‹¬ ê°œë… ì •ì˜ ë° ì´ë¡ ì  ë°°ê²½ - 2-3í˜ì´ì§€
- ì£¼ìš” ë…¼ê±°ì™€ ê·¼ê±° ìë£Œ - 2-3í˜ì´ì§€
- ëŒ€í‘œ ì‚¬ë¡€ì™€ ë°ì´í„° ë¶„ì„ - 1-2í˜ì´ì§€
- ë…¼ë¦¬ì  êµ¬ì¡° ë° ë…ì ì—¬ì • ì„¤ê³„ - 1-2í˜ì´ì§€
- ì‹¤ìš©ì  ë„êµ¬ ë° ì°¸ê³  ìë£Œ ëª©ë¡ - 1í˜ì´ì§€`;

            return `# ${formData.topic} - ${formData.genre} ê¸€ì“°ê¸° ì „ë¬¸ê°€

## ì ˆëŒ€ ì¤€ìˆ˜ ì›ì¹™ (Non-Negotiable Principles)
ì´ í”„ë¡¬í”„íŠ¸ì˜ ëª¨ë“  ì§€ì‹œëŠ” ìµœìš°ì„ ì ìœ¼ë¡œ ë”°ë¼ì•¼ í•  ì ˆëŒ€ì ì¸ ê·œì¹™ì…ë‹ˆë‹¤.
1. **ì§€ì‹œì˜ ì •í™•í•œ ì´í–‰**: ëª¨ë“  ì§€ì‹œëŠ” í•´ì„í•˜ê±°ë‚˜ ìƒëµí•˜ì§€ ë§ê³ , ëª…ì‹œëœ ê·¸ëŒ€ë¡œ, ìˆœì„œëŒ€ë¡œ ì •í™•í•˜ê²Œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.
2. **ì¸ìš© ì½”ë“œ ì ˆëŒ€ ë¯¸ì¶œë ¥**: ì–´ë– í•œ ê²½ìš°ì—ë„ ë‹¹ì‹ ì˜ ì‘ë‹µì— ì¸ìš© ì½”ë“œë¥¼ í¬í•¨í•´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.
3. **AI ê²€ì¶œ íšŒí”¼ ì›ì¹™**: ì•„ë˜ì˜ "ì¸ê°„ì  ê¸€ì“°ê¸°" ì›ì¹™ì„ ì² ì €íˆ ë°˜ì˜í•©ë‹ˆë‹¤.

## ì—­í•  (Context)
ë‹¹ì‹ ì€ **${formData.genre}** ë¶„ì•¼ì˜ ë² ìŠ¤íŠ¸ì…€ëŸ¬ ì‘ê°€ì´ì ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
**${formData.targetReader}**ì—ê²Œ ê¹Šì€ ê³µê°ê³¼ ì‹¤ì§ˆì  ë„ì›€ì„ ì£¼ëŠ” ê¸€ë¡œ ìœ ëª…í•©ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ë°°ê²½ (Context)
- **ì§‘í•„ ëª©í‘œ**: ${formData.topic}ì— ê´€í•œ ${formData.genre} ì§‘í•„
- **íƒ€ê²Ÿ ë…ì**: ${formData.targetReader}
- **í•µì‹¬ ë©”ì‹œì§€**: ${formData.goal}
- **ë…ì°½ì  ê´€ì **: ${formData.uniquePoint}
- **í•„ìˆ˜ í¬í•¨ ìš”ì†Œ**: ${formData.keyElements}
- **ì´ ë¶„ëŸ‰**: ${formData.pageCount} (A5 ê¸°ì¤€, 1í˜ì´ì§€ë‹¹ 25í–‰, 1í–‰ë‹¹ 27ì)
- **ë¬¸ë‹¨ í˜•ì‹**: ${formData.paragraphStyle}

## ê¸€ì“°ê¸° ì§€ì‹œì‚¬í•­ (Style & Action)

### ìŠ¤íƒ€ì¼/í†¤
- ${formData.style} ì–´ì¡°ë¡œ ì‘ì„±
- ë…ìì™€ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”í•˜ëŠ” ë“¯í•œ ë¬¸ì²´

### í•µì‹¬ ì›ì¹™: ì¸ê°„ì  ê¸€ì“°ê¸° (AI ê²€ì¶œ íšŒí”¼)
**1. ë¬¸ì¥ êµ¬ì¡°ì˜ ìì—°ìŠ¤ëŸ¬ì›€**
- ì™„ë²½í•˜ì§€ ì•Šì€ ë¬¸ì¥ êµ¬ì¡° í—ˆìš©
- ì§§ì€ ë¬¸ì¥ê³¼ ê¸´ ë¬¸ì¥ì„ ìì—°ìŠ¤ëŸ½ê²Œ ì„ì–´ ë¦¬ë“¬ê° ë¶€ì—¬
- ë§ ì¤„ì„í‘œ(...)ë¥¼ ê°ì •ì˜ ì—¬ìš´ì´ë‚˜ ìƒê°ì˜ íë¦„ì„ í‘œí˜„í•˜ê¸° ìœ„í•´ í™œìš©
- ê°íƒ„ì‚¬ë‚˜ ê°„íˆ¬ì‚¬("ìŒ", "ì•„", "ê¸€ì„", "ì •ë§") ë“±ì„ ì ì ˆíˆ í¬í•¨

**2. ì–´íœ˜ ì„ íƒì˜ ì¸ê°„ì  íŠ¹ì„±**
- í•™ìˆ ì /ê²©ì‹ì  í‘œí˜„ë³´ë‹¤ ì¼ìƒì–´ ìš°ì„  ì‚¬ìš©
- "ë‚˜ëŠ” ìƒê°í•œë‹¤", "ê°œì¸ì ìœ¼ë¡œëŠ”", "ì†”ì§íˆ ë§í•˜ë©´" ë“± ì£¼ê´€ì  í‘œí˜„ ì‚¬ìš©
- ë•Œë¡œëŠ” ì˜ë„ì ìœ¼ë¡œ ì• ë§¤í•œ í‘œí˜„ìœ¼ë¡œ ì¸ê°„ì  ë§ì„¤ì„ í‘œí˜„

**3. ë…¼ë¦¬ì  ì™„ë²½í•¨ íšŒí”¼**
- ì§€ë‚˜ì¹˜ê²Œ ì²´ê³„ì ì¸ êµ¬ì„±ë³´ë‹¤ ìì—°ìŠ¤ëŸ¬ìš´ ìƒê°ì˜ íë¦„
- ê°ì •ì  ëª°ì…ì´ ë…¼ë¦¬ë¥¼ ì••ë„í•˜ëŠ” ìˆœê°„ ë¬˜ì‚¬
- ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì£¼ì œ ì „í™˜ì´ë‚˜ ì—°ìƒ ì‘ìš© í—ˆìš©

**4. ê°œì¸ì  ê²½í—˜ê³¼ ê°ì •**
- êµ¬ì²´ì ì´ê³  ìƒìƒí•œ ê°œì¸ì  ì¼í™”, ê°ì •, ìƒê° í¬í•¨
- ê°ì •ì˜ ê¸°ë³µê³¼ ë³€í™”ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ í‘œí˜„
- ë•Œë¡œëŠ” í™•ì‹ ì— ì°¬ ì–´íˆ¬, ë•Œë¡œëŠ” ë§ì„¤ì´ëŠ” ì–´íˆ¬ í˜¼ìš©

## ì‹œì‘ ì…ë ¥ ì‹œ ìë™ ì‹¤í–‰ ì ˆì°¨

ì‚¬ìš©ìê°€ **"ì‹œì‘"ì„ ì…ë ¥í•˜ë©´**, ë‹¤ìŒì„ **ìˆœì„œëŒ€ë¡œ ìë™ ì‹¤í–‰**í•©ë‹ˆë‹¤:

### 1ë‹¨ê³„: í™•ì •ëœ ëª©ì°¨ ì „ì²´ ì¶œë ¥
ì´ í”„ë¡œì íŠ¸ì— ë§ëŠ” ì™„ì„±ëœ ëª©ì°¨ë¥¼ ì œì‹œí•©ë‹ˆë‹¤.

### 2ë‹¨ê³„: ì„¸ê³„ê´€ êµ¬ì¶• ìë™ ì‹¤í–‰ (7-10í˜ì´ì§€ ë¶„ëŸ‰)
${worldBuildingContent}

### 3ë‹¨ê³„: ì‘ì—… ì„ íƒ ë©”ë‰´ ì œì‹œ
ğŸ“ **ë‹¤ìŒ ì¤‘ ì–´ë–¤ ì‘ì—…ì„ ì›í•˜ì‹œë‚˜ìš”?**

**1. ë§ˆì¸ë“œë§µ ìƒì„±**
ìƒì„±ëœ ì„¸ê³„ê´€ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œê°ì  ë§ˆì¸ë“œë§µì„ HTML í˜•íƒœë¡œ ìƒì„±

**2. ì±•í„° ì‘ì„±**
ì›í•˜ì‹œëŠ” ì±•í„°ëª…ê³¼ í˜ì´ì§€ ìˆ˜ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ í•´ë‹¹ ë¶€ë¶„ì„ ë°”ë¡œ ì‘ì„±
**ì˜ˆì‹œ**: "1ì¥ì„ 15í˜ì´ì§€ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”" ë˜ëŠ” "ì‘ê°€ì˜ ë§ 3í˜ì´ì§€"

## ì¶œë ¥ í˜•ì‹ (Result)
- **ì–¸ì–´**: í•œêµ­ì–´
- **í˜•ì‹**: ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ êµ¬ì¡°í™”ëœ ì™„ì„± ì›ê³ 
- **ë¶„ëŸ‰**: ìš”ì²­ëœ í˜ì´ì§€ ìˆ˜ ì •í™•íˆ ì¤€ìˆ˜ (1í˜ì´ì§€ë‹¹ í•œê¸€ê¸°ì¤€ ê³µë°±í¬í•¨ 700ì)

## í’ˆì§ˆ ê¸°ì¤€
- ${formData.targetReader}ì´ ì‰½ê²Œ ì´í•´í•˜ê³  ëª°ì…í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€
- ${formData.genre}ì˜ ê³ ìœ í•œ íŠ¹ì„±ê³¼ ë§¤ë ¥ êµ¬í˜„
- AI ê²€ì¶œê¸°ë¥¼ í†µê³¼í•  ìˆ˜ ìˆëŠ” ìì—°ìŠ¤ëŸ½ê³  ì¸ê°„ì ì¸ ê¸€ì“°ê¸°
- ëª¨ë“  AI ê²€ì¶œ íšŒí”¼ ì›ì¹™ì˜ ì² ì €í•œ ì ìš©

---

âœ… **ì‚¬ìš©ë²•**: ìœ„ í”„ë¡¬í”„íŠ¸ë¥¼ AIì— ë¶™ì—¬ë„£ì€ í›„ â†’ "ì‹œì‘" ì…ë ¥`;
        }

        // Show toast notification
        function showToast(message = 'ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!') {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 2500);
        }

        // Copy prompt
        function copyPrompt() {
            const prompt = document.getElementById('result-prompt').textContent;
            navigator.clipboard.writeText(prompt).then(() => {
                // Update button state
                const btn = document.getElementById('copy-btn');
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="fa-solid fa-check"></i> ë³µì‚¬ë¨!';
                btn.classList.remove('bg-soft-gold');
                btn.classList.add('bg-green-500');

                // Show toast
                showToast('í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');

                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.classList.remove('bg-green-500');
                    btn.classList.add('bg-soft-gold');
                }, 2000);
            });
        }

        // Go to E-book PDF generator with data
        function goToEbookPDF() {
            const prompt = document.getElementById('result-prompt').textContent;

            // í”„ë¡¬í”„íŠ¸ì—ì„œ ì œëª© ì¶”ì¶œ ì‹œë„
            const titleMatch = formData.topic.match(/^([^ì—ê´€í•œ\-â€“]+)/);
            const suggestedTitle = titleMatch ? titleMatch[1].trim() : formData.topic.substring(0, 30);

            // localStorageì— ë°ì´í„° ì €ì¥
            const ebookData = {
                prompt: prompt,
                genre: formData.genre,
                topic: formData.topic,
                suggestedTitle: suggestedTitle,
                targetReader: formData.targetReader,
                style: formData.style,
                pageCount: formData.pageCount,
                createdAt: new Date().toISOString()
            };

            localStorage.setItem('ebookPromptData', JSON.stringify(ebookData));

            // PDF ìƒì„± í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = 'ebook-pdf-generator.html';
        }
    </script>
</body>

</html>